(window.webpackJsonpartopod=window.webpackJsonpartopod||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),c=n.n(i),o=(n(69),n(70),n(7)),s=n(4),l=n(8),u=n(9),p=n(10),h=n(3),m=n.n(h),d=n(11),f=n(5),b=n(53),E=n.n(b),v=n(57),O=n.n(v),g=n(12),j=n(19),w=n(15),y=n(25),x=n.n(y),k=function(e,t,n){var a=function(e){return Math.PI/180*e},r=function(e,t){return Math.PI/180*(e-t)},i=e[0],c=t[0],o=e[1],s=t[1],l=r(c,i),u=r(s,o);i=a(i),c=a(c);var p=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(i)*Math.cos(c),h=6371*(2*Math.asin(Math.sqrt(p)));return n&&(h/=1.60934),h};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(w.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={location:{lat:0,lng:0},exhibitions:[],selected:[]},N=function(e){return{type:"SELECTED_EXHIBITIONS",exhibition:e}},I=function(e){return{type:"DESELECT_EXHIBITION",exhibition:e}},L=function(e){return{type:"SET_LOCATION",location:e}},D=function(e){return{type:"SET_CLOSEST",location:e}},A=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n){var a,r,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://prod.82tzcisbbm.us-east-1.elasticbeanstalk.com/api");case 2:a=t.sent,r=a.data,i=r.map((function(t){return C({},t,{distance:k([e.lat,e.lng],[t.lat,t.lng],!0)})})).sort((function(e,t){return e.distance>t.distance?1:-1})),n({type:"GOT_EXHIBITIONS",exhibitions:i});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"GOT_SELECTED",selected:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(I(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GOT_EXHIBITIONS":return C({},e,{exhibitions:t.exhibitions});case"GOT_SELECTED":return C({},e,{selected:e.selected});case"SELECTED_EXHIBITIONS":return C({},e,{selected:[t.exhibition].concat(Object(j.a)(e.selected))});case"DESELECT_EXHIBITION":return C({},e,{selected:e.selected.filter((function(e){return e.id!==t.exhibition.id}))});case"FAKE_SELECTED":return C({},e,{selected:e.exhibitions.slice(0,5)});case"SET_LOCATION":return C({},e,{location:t.location});case"GET_DISTANCES":return C({},e,{exhibitions:e.exhibitions.map((function(e){return e.distance=k([t.location.lat,t.location.lng],[e.lat,e.lng],!0)})).sort((function(e,t){return e.distance<t.distance}))});case"SET_CLOSEST":return C({},e,{selected:[].concat(Object(j.a)(e.selected),Object(j.a)(e.exhibitions.slice(0,5)))});default:return e}},B=n(26),V=n.n(B),H=n(56),J=n.n(H),X=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){var t=this.props.exh;this.props.selected.includes(t)?this.props.deselectExhibition(t):this.props.selectExhibition(t)}},{key:"render",value:function(){var e=this.props.exh;return r.a.createElement("div",{className:"map-item"},this.props.selected.includes(e)?r.a.createElement("div",{className:"map-deselect-icon",onClick:this.handleClick},r.a.createElement(V.a,null)):r.a.createElement("div",{className:"map-select-icon",onClick:this.handleClick},r.a.createElement(J.a,null)),r.a.createElement("p",null,r.a.createElement("i",null,e.title)),r.a.createElement("p",null,e.gallery))}}]),t}(r.a.Component),z=Object(g.b)((function(e){return{selected:e.selected}}),(function(e){return{selectExhibition:function(t){return e((n=t,function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(N(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n},deselectExhibition:function(t){return e(M(t))}}}))(X),G=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mouse:!1},n.handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){this.setState({mouse:!this.state.mouse})}},{key:"render",value:function(){var e=this,t=this.props.selected?"marker-selected":"marker";return r.a.createElement("div",{className:t,onClick:function(){return e.handleClick()}},this.state.mouse?r.a.createElement(z,{exh:this.props.exh}):r.a.createElement(O.a,null))}}]),t}(r.a.Component),U=n(58),W=n.n(U);function q(){return r.a.createElement("div",{className:"person-pin"},r.a.createElement(W.a,null))}var F=n(129),K=n(130),R=Object(F.a)((function(e){return{progress:{margin:e.spacing(2)}}}));function Z(){var e=R();return r.a.createElement("div",{className:"loading"},r.a.createElement(K.a,{className:e.progress}))}var $=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={userLocation:{lat:0,lng:0},zoom:14,loading:!0},e.loadExhibitions=e.loadExhibitions.bind(Object(f.a)(e)),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){var n=e.coords,a=n.latitude,r=n.longitude;t.setState({userLocation:{lat:a,lng:r},loading:!1}),!1===t.state.loading&&t.loadExhibitions()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadExhibitions",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.setLocation(this.state.userLocation);case 2:return e.next=4,this.props.getExhibitions(this.state.userLocation);case 4:return e.next=6,this.props.setClosest(this.state.userLocation);case 6:return e.next=8,this.props.getSelected();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(Z,null):r.a.createElement("div",{className:"map-container"},r.a.createElement("div",{id:"map"},r.a.createElement(E.a,{bootstrapURLKeys:{key:"AIzaSyCTILRbtZ7JJi2hgtJkL5SoCSJ0Tq9mwPA"},center:this.state.userLocation,defaultZoom:this.state.zoom},r.a.createElement(q,{lat:this.props.location.lat,lng:this.props.location.lng}),this.props.exhibitions.map((function(t){return r.a.createElement(G,{key:t.id,lat:t.lat,lng:t.lng,exh:t,selected:!!e.props.selected.includes(t)})})))))}}]),t}(r.a.Component),Q=Object(g.b)((function(e){return{exhibitions:e.exhibitions,selected:e.selected,location:e.location}}),(function(e){return{getExhibitions:function(t){return e(A(t))},getSelected:function(){return e(_())},setClosest:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(D(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setLocation:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(L(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))($),Y=n(35);var ee=function(e){var t=e.exh,n={month:"long",day:"numeric",year:"numeric"},a=Y.DateTime.fromISO(t.showStart).setLocale("en-US").toLocaleString(n),i=Y.DateTime.fromISO(t.showEnd).setLocale("en-US").toLocaleString(n),c="https://artforum.com".concat(t.imgUrl);return r.a.createElement("div",{className:"about body"},r.a.createElement("em",null,t.title),r.a.createElement("p",{className:"multi-line"},t.description),r.a.createElement("p",null,"Open ",a," to ",i),r.a.createElement("p",null,t.hours),r.a.createElement("img",{src:c,alt:t.imgCaption,className:"single-exhibition-image"}),r.a.createElement("p",null,t.imgCaption),r.a.createElement("em",null,t.gallery),r.a.createElement("p",null,"Address: ",t.address,", ",t.city,", ",t.zip),r.a.createElement("p",null,t.galleryEmail),r.a.createElement("p",null,t.phone))},te=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={singleView:!1},n.handleClick=n.handleClick.bind(Object(f.a)(n)),n.toggleSingleView=n.toggleSingleView.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){this.props.deselectExhibition(this.props.row)}},{key:"toggleSingleView",value:function(e){this.setState({singleView:!this.state.singleView})}},{key:"render",value:function(){return r.a.createElement("div",{className:"list-row"},r.a.createElement("div",{className:"deselect-icon",onClick:this.handleClick},r.a.createElement(V.a,null)),r.a.createElement("div",{className:"list-row-info",onClick:this.toggleSingleView},this.state.singleView?r.a.createElement(ee,{exh:this.props.row}):r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("em",null,this.props.row.title)," at ",this.props.row.gallery),r.a.createElement("p",null,this.props.row.hours),r.a.createElement("p",null,this.props.row.distance.toFixed(2),"mi away"))))}}]),t}(r.a.Component),ne=Object(g.b)(null,(function(e){return{deselectExhibition:function(t){return e(M(t))}}}))(te);var ae=function(){return r.a.createElement("div",{className:"about body"},r.a.createElement("p",null,"Artopod is a project by Siwin Lo."))},re=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={about:!1},n.toggleAbout=n.toggleAbout.bind(Object(f.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getSelected();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleAbout",value:function(e){this.setState({about:!this.state.about})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"banner"},r.a.createElement("h1",{onClick:this.toggleAbout},"Artopod"),r.a.createElement("div",{className:"about"},this.state.about?r.a.createElement(ae,null):null)),r.a.createElement("div",{className:"list-container"},this.props.selected.length>0?this.props.selected.map((function(e){return r.a.createElement(ne,{key:e.id,row:e})})):r.a.createElement("h3",null,"Select some exhibitions to begin")))}}]),t}(r.a.Component),ie=Object(g.b)((function(e){return{exhibitions:e.exhibitions,selected:e.selected}}),(function(e){return{getExhibitions:function(){return e(A())},getSelected:function(){return e(_())}}}))(re),ce=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={about:!1},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"main-container"},r.a.createElement("div",null,r.a.createElement(Q,null)),r.a.createElement("div",null,r.a.createElement(ie,null))))}}]),t}(r.a.Component);var oe=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ce,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=n(18),le=n(59),ue=n(60),pe=n.n(ue),he=n(61),me=Object(se.createStore)(P,Object(le.composeWithDevTools)(Object(se.applyMiddleware)(he.a.withExtraArgument({axios:x.a}),pe.a)));c.a.render(r.a.createElement(g.a,{store:me},r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,t,n){e.exports=n(117)},69:function(e,t,n){},70:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.6654ee87.chunk.js.map